# RetailChainServer

**RetailChainServer** — это серверное решение для управления розничной сетью, реализующее MVP функциональность API по товарам, магазинам и продажам. Проект предназначен для интеграции с внешними системами и кассовыми аппаратами через Kafka и REST API.

## Архитектура

- **RetailChain Server (Backend API)**  
  REST API на Java (Spring), обеспечивающее централизованное управление сущностями розничной сети: товары, цены, магазины, кассы, продажи, смены.

- **PostgreSQL**  
  Используется как основная база данных для хранения всех сущностей: товаров, цен, магазинов, чеков и смен.

- **Apache Kafka**  
  Событийная шина для коммуникации между сервером и кассами. Передаёт события об изменениях товаров через Kafka в режиме publish-subscribe (кассы получают обновления автоматически), а также события о сменах и чеках.

## MVP функциональность

### Товары
- Создание, обновление и удаление товаров
- Управление штрих-кодами и ценами
- Получение информации о товарах и их ценах

### Магазины
- Добавление и удаление магазинов
- Получение магазинов по ID и номеру
- Управление привязанными кассами

### Кассы
- Добавление/удаление касс
- Обновление статуса (например, `ACTIVE`/`DELETED`)
- Получение касс по ID, номеру и магазину

### Продажи и смены
- Получение чеков по дате, смене, кассе и магазину
- Получение смен и связанных продаж
- Позиции чеков с деталями по товарам

## Взаимодействие с внешними системами

- Внешняя система отправляет данные о товарах — сервер обновляет БД и публикует событие в Kafka
- Кассы получают обновления через подписку на Kafka
- Чеки и смены от касс приходят в Kafka и сохраняются в БД

## Текущий статус

**Реализован MVP:**
- Полностью работающее REST API с OpenAPI спецификацией (`/api/v1/**`)
- CRUD операции над ключевыми сущностями (товары, магазины, кассы, продажи)


**В будущем:**
- Подключение Kafka для обмена событиями с кассами
- Реализация подписки на Kafka для синхронизации касс


## Документация

Документация API доступна через OpenAPI (Swagger):

http://localhost:9999/swagger-ui/


## Используемые технологии

- **Java 17** — основной язык разработки
- **Spring Boot** — создание REST API и конфигурация приложения
- **Spring Data JPA** — работа с базой данных через ORM
- **PostgreSQL** — реляционная база данных
- **Apache Kafka** — коммуникация с кассами через события
- **OpenAPI (Swagger)** — описание и тестирование REST-интерфейсов
- **Gradle** — система сборки проекта

Автор: Sernamgit
